# -*- coding: utf-8 -*-
"""evaluation.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1PeazFoLW23vNM8deYmsfcwc8sgPp71Wg
"""

from surprise import accuracy
import json
import csv

def evaluate_model(predictions, output_json='evaluation_metrics.json'):
    rmse = accuracy.rmse(predictions, verbose=True)
    with open(output_json, 'w') as f:
        json.dump({'rmse': rmse}, f)
    return rmse

def save_top_n(top_n, output_csv='top_n_recommendations.csv'):
    with open(output_csv, 'w', newline='') as f:
        writer = csv.writer(f)
        writer.writerow(['user_id', 'recommendations'])
        for uid, recs in top_n.items():
            movie_list = ', '.join(str(iid) for iid, _ in recs)
            writer.writerow([uid, movie_list])